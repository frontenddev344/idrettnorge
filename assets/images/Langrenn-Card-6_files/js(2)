window.triggerbee=window.triggerbee||{},function(){this.session={},this.identity={}}.apply(triggerbee),function(){this.tags=[],this.addTags=function(e){if("string"==typeof e)this.tags.push(e),mtr.addTag(e);else{this.tags=this.tags.concat(e);for(var t=0;t<e.length;t++)mtr.addTag(e[t])}mtr.ping()}}.apply(triggerbee.session),function(){this.tags=[],this.addTags=function(e){if("string"==typeof e)this.tags.push(e),mtr.addTag(e);else{this.tags=this.tags.concat(e);for(var t=0;t<e.length;t++)mtr.addTag(e[t])}mtr.ping()}}.apply(triggerbee.identity),window.triggerbee.event=function(e){if(e){const t=e.data;t&&mtr.addSessionData(t.identity),mtr.logEvent(e)}else console.warn("Event-parameter is required")},window.triggerbee.identify=function(e,t){mtr.addSessionData(e),mtr.logEvent({type:"identification",callback:t})};var mtr_obj=mtr_obj||function(){var e=null;function t(){a("beforeTriggerbeeReady");var e=this,t=[],i=[],n=0,o=!1,r="t.myvisitors.se";function s(e,t){for(var i=(e=e.substring(1)).split("&"),n=0;n<i.length;n++){var o=i[n].split("=");if(decodeURIComponent(o[0])==t)return decodeURIComponent(o[1])}}function a(e,t){if(document.createEvent){var i=document.createEvent("Events");i.detail=t,i.initEvent(e,!0,!0),document.dispatchEvent(i)}}function c(t){if(t){var i=e.getPerson(),n=void 0!==i.identifier;i.identifier=t.toLowerCase().trim(),e.setPerson(i),a("triggerbeePersonIdentified",{identifier:t,isPreviouslyIdentified:n})}}this.domain="http://"+r,"https:"===document.location.protocol&&(this.domain="https://"+r,this.secure=1),this.init=function(i){e.initiateIdentifierKey();var n=e.initiateVisit();e.initiatePerson(n),t.push(i),e.setup_site_id(i),e.initClearUserData(),a("afterTriggerbeeReady")},this.setup_site_id=function(t){is_first_page_view=!e.get_cookie("fpv_"+t),e.set_cookie("fpv_"+t,1,1200),(is_first_page_view||mtr_custom.disable_cookies)&&e.set_referrer(document.referrer),is_first_page_view&&e.set_identifier(),(!mtr_custom.disable_pageview||is_first_page_view&&!mtr_custom.disable_cookies)&&e.log_pageview()},this.log_pageview=function(n){var o=e.get_href();e.log_data("","&href="+e.encode(o)+"&title="+e.encode(mtr_custom.title||document.title)+(e.ref?"&ref="+e.ref:"")+(e.identifier?"&identifier="+e.identifier:"")+(n||""),1);for(var r=0;r<t.length;r++)e.is_pageview_fired(t[r])||i.push(t[r])},this.log_data=function(i,n,o,r){if(i=i||"pageview","object"==typeof(n=n||"")){n.type&&(i=n.type);var a="";for(var d in n){if("type"!=d&&n.hasOwnProperty&&n.hasOwnProperty(d))e.encode(n[d])&&(a+="&"+d+"="+e.encode(n[d]))}n=a,delete a}"pageview"==i&&e.addPageviewToVisit(location.pathname);var u="",g="",f="";if((u=e.getUid())||(e.set_cookie("_mtruid",e.rand()),u=e.get_cookie("_mtruid")),u){if("ping"!=i){if(mtr_custom.goal){if("object"==typeof mtr_custom.goal)for(var d in mtr_custom.goal)mtr_custom.goal.hasOwnProperty&&mtr_custom.goal.hasOwnProperty(d)&&(e.addGoal(e.encode(mtr_custom.goal[d])),g+="&goal["+e.encode(d)+"]="+e.encode(mtr_custom.goal[d]));else e.addGoal(e.encode(mtr_custom.goal)),g="&goal="+e.encode(mtr_custom.goal);mtr_custom.goal=""}if(decodeURIComponent(n).indexOf("utm_custom["+this.identifier_key+"]")>-1){var l=s(n,"href");c(s(l.substring(l.indexOf("?")),"utm_custom["+this.identifier_key+"]"))}}if(triggerbee.session.tags){for(d=0;d<triggerbee.session.tags.length;d++)f+="&tags="+e.encode(triggerbee.session.tags[d]);triggerbee.session.tags=[]}if(triggerbee.identity.tags){for(d=0;d<triggerbee.identity.tags.length;d++)f+="&identity-tags="+e.encode(triggerbee.identity.tags[d]);triggerbee.identity.tags=[]}for(var m=0;m<t.length;m++){var h=t[m];e.get_cookie("dont_track_"+h)||(o&&"pageview"==i&&e.is_pageview_fired(h)||(mtr_custom.onlydev||e.inject(e.base_url(e.domain,m,i)+"&type="+i+n+g+f+(u?"&jsuid="+u:"")+(mtr_custom.disable_cookies?"&noc=1":"")+"&mime=js&x="+Math.random(),void 0,r),"outbound"!=i&&"download"!=i||e.pause()))}e.ref="",e.identifier=""}else console.warn("No uid found, cookie probably deleted or not allowed to be set")},this.inject=function(e,t,i){var n;if("js"==(t=t||"js")?((n=document.createElement("script")).type="text/javascript",n.async=!0,n.src=e):"css"==t&&((n=document.createElement("link")).type="text/css",n.rel="stylesheet",n.href=e),i){"object"!=typeof i&&(i.func=i);var o=!1;setTimeout((function(){o||(o=!0,i.func(i.params))}),i.timeout||3e3),function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,(function(){return i.call(e,window.event)}))}(n,"load",(function(){o||(o=!0,i.func(i.params))}))}(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(n)},this.pause=function(e){for(var t=new Date,i=t.getTime()+(e||mtr_custom.timer||500);t.getTime()<i;)t=new Date},this.download=function(t){e.event_log(t,"download")},this.outbound=function(t){e.event_log(t,"outbound")},this.click=function(t){e.event_log(t,"click")},this.event_log=function(t,i){var n=e.get_target(t);e.log(e.get_adv_href(n),e.get_adv_text(n),i)},this.add_event=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},this.log=function(t,i,n,o){"pageview"==n&&(t=t.replace(/^https?:\/\/([^\/]+)/i,""));var r={type:n||"click",href:t,title:i||""};e.log_data(n,r,void 0,o)},this.event=function(t,i){e.log(null,t,"event",i)},this.logEvent=function(t){var i=t.type;i||(i="event");const n=t.id,o=t.name,r=t.data;var s={title:o||""};if((n||o||r)&&(s.eventData=JSON.stringify({id:n,name:o,data:r})),"goal"===i&&(s.type="goal",s["goal[name]"]=o,t.revenue&&(s["goal[revenue]"]=t.revenue),e.addGoal(o)),"purchase"==i){const t=e.getVisit();t.purchases||(t.purchases=[]);const i={time:Math.round((new Date).getTime()/1e3)};r&&(i.revenue=r.revenue?parseInt(r.revenue):void 0,i.appliedCoupon=!!r.couponCode),t.purchases.push(i),e.setVisit(t)}e.log_data(i,s,void 0,t.callback)},this.widget=function(t,i,n){e.log(null,i,"widget-"+t,n)},this.goal=function(t,i,n){if(t){e.addGoal(t);var o={type:"goal",title:t};o["goal[name]"]=t,i&&(o["goal[revenue]"]=i),e.log_data("goal",o,void 0,n)}},this.ping=function(){e.log_data("ping"),o=!1},this.ok=function(){var t=is_first_page_view&&0==n;if(!(n>=5||o)&&(t||!mtr_custom.disable_ping)){var i=t?5e3:18e4;setTimeout(e.ping,i),o=!0,n++}},this.getUid=function(){return uid=e.get_cookie("_smtruid"),uid||(uid=e.get_cookie("_mtruid")),uid},this.get_cookie=function(e){for(var t=document.cookie.split(";"),i=0,n=t.length;i<n;i++)if(t[i].match(new RegExp("\\b"+e+"=")))return decodeURIComponent(t[i].split(e+"=")[1]);return""},this.set_cookie=function(e,t,i){if(mtr_custom.disable_cookies)return!1;var n=new Date;i?n.setTime(n.getTime()+1e3*i):n.setMonth(n.getMonth()+13),document.cookie=e+"="+t+";expires="+n.toGMTString()+";path=/;domain="+(mtr_custom.cookie_domain||"."+location.hostname.replace(/^www\./i,""))+";"},this.base_url=function(i,n,o){var r=i+"/t?site_id="+t[n];if("ping"==o)return r;r+="&res="+screen.width+"x"+screen.height+"&lang="+(navigator.language||navigator.browserLanguage||"en").substr(0,2)+(e.secure?"&secure=1":"");try{for(var s=["email","firstname","lastname","name","organization","telephone"],a=0;a<s.length;a++){var d=s[a],u=e.get_cookie("utm_custom_"+d);u&&null!=u&&-1==r.indexOf("custom["+d+"]=")&&(r+="&custom["+d+"]="+e.encode(u),d===this.identifier_key&&c(u))}}catch(e){}if(mtr_custom.session){for(var g in mtr_custom.session)mtr_custom.session.hasOwnProperty&&mtr_custom.session.hasOwnProperty(g)&&-1==r.indexOf("custom["+e.encode(g)+"]=")&&(r+="&custom["+e.encode(g)+"]="+e.encode(mtr_custom.session[g]),g===this.identifier_key&&c(mtr_custom.session[g]));mtr_custom.session=void 0}return r},this.set_referrer=function(t){e.ref=t?RegExp("^https?://[^/]*"+location.host.replace(/^www\./i,"")+"/","i").test(t)?"":this.encode(t):""},this.set_identifier=function(){var t=e.getPerson();t&&t.identifier&&(e.identifier=t.identifier)},this.get_adv_text=function(t){do{var i=t.text?t.text:t.innerText;if(i)return i;if(t.alt)return t.alt;if(t.title)return t.title;if(t.src)return t.src;t=e.get_parent(t)}while(t);return""},this.get_adv_href=function(t){do{if(t.href&&!t.src)return t.href;t=e.get_parent(t)}while(t);return""},this.get_href=function(t){var i=mtr_custom.href||"";return i||(mtr_custom.iframe&&self!=top?(e.set_referrer(top.document.referrer),i=top.location.pathname+top.location.search,mtr_custom.title||(mtr_custom.title=top.document.title)):i=location.hash.match(/utm_/i)?location.pathname+(location.search?location.search+"&":"?")+location.hash.substr(1):location.pathname+location.search),t?e.encode(i):i},this.get_target=function(e){e||(e=window.event);var t=e.target?e.target:e.srcElement;return t.nodeType&&3==t.nodeType&&(t=t.parentNode),t},this.is_pageview_fired=function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1},this.get_parent=function(e){return e.parentElement||e.parentNode},this.encode=function(e){return window.encodeURIComponent?encodeURIComponent(e):escape(e)},this.rand=function(){return Math.round(4294967295*Math.random())},this.initiateIdentifierKey=function(){this.identifier_key="email",mtr_custom.identifier_key&&(this.identifier_key=mtr_custom.identifier_key,"phone"==this.identifier_key&&(this.identifier_key="telephone"))},this.initiatePerson=function(t){var i=e.getPerson();if(i||(i={tags:[],goals:[]},e.setPerson(i)),t&&t.time&&(i.visits||(i.visits=[]),-1===i.visits.indexOf(t.time))){i.visits.push(t.time);i.visits.length>10&&(i.visits=i.visits.slice(-10)),e.setPerson(i)}},this.setPerson=function(t){"undefined"!=typeof Storage&&localStorage.setItem("mtr_p",e.obfuscate(JSON.stringify(t)))},this.getPerson=function(){if("undefined"!=typeof Storage){var t=localStorage.getItem("mtr_p");return t&&JSON.parse(e.deobfuscate(t))}return null},this.addTag=function(t){var i=e.getPerson();i.labels&&(i.tags=i.labels,i.labels=void 0),-1===i.tags.indexOf(t)&&(i.tags.push(t),e.setPerson(i)),a("triggerbeeTagAdded",{name:t})},this.addLabel=function(e){this.addTag(e)},this.addGoal=function(t){var i=e.getPerson();-1===i.goals.indexOf(t)&&(i.goals.push(t),e.setPerson(i));var n=e.getVisit();-1===n.goals.indexOf(t)&&(n.goals.push(t),e.setVisit(n)),a("triggerbeeGoalAdded",{name:t}),e.set_cookie("mtr_goal-"+t,1,420)},this.initiateVisit=function(){var t=e.getVisit();if(!t){var i=location.search.replace("?","").split("&");t={time:new Date,landingPageQueryParams:i,goals:[]},e.setVisit(t)}return t},this.setVisit=function(t){"undefined"!=typeof Storage&&sessionStorage.setItem("mtr_v",e.obfuscate(JSON.stringify(t)))},this.getVisit=function(){if("undefined"!=typeof Storage){var t=sessionStorage.getItem("mtr_v");return t&&JSON.parse(e.deobfuscate(t))}return null},this.addPageviewToVisit=function(t){var i=e.getVisit();i.pageviews=i.pageviews||[],i.pageviews.push(t),e.setVisit(i)},this.obfuscate=function(e){for(var t=[],i=0;i<e.length;i++){var n=e.charCodeAt(i);n=String("000"+n).slice(-3),t.push(n)}return t.join("")},this.deobfuscate=function(e){for(var t="",i=e.match(/.{1,3}/g),n=0;n<i.length;n++)t+=String.fromCharCode(parseInt(i[n],10));return t},this.getQueryStringValue=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))},this.clearUserData=function(){for(var t=document.cookie.split(";"),i=0;i<t.length;i++){var n=t[i].trim(),o=n.indexOf("="),r=o>-1?n.substr(0,o):n;"mtr-"!==r.substr(0,4)&&"mtr_"!==r.substr(0,4)&&"_mtruid"!==r.substr(0,7)&&"fpv_"!==r.substr(0,4)||e.set_cookie(r,void 0,-1)}"undefined"!=typeof Storage&&(localStorage.removeItem("mtr_p"),sessionStorage.removeItem("mtr_v")),console.log("User data cleared")},this.initClearUserData=function(){-1!==location.search.indexOf("clear-tb=")&&e.clearUserData()},this.addSessionData=function(e){if(e)for(var t in mtr_custom.session||(mtr_custom.session={}),e)mtr_custom.session[t]=e[t]}}return new function(){this.getInstance=function(){return null==e&&((e=new t).constructor=null),e},this.clearInstance=function(){e=null}}}();if(mtr)console.warn("Triggerbee script already added, please only add it once to avoid errors");else{var mtr=mtr_obj.getInstance();if(window.mtr_site_id){var mtr_site_ids=mtr_site_ids||[];mtr_site_ids.push(mtr_site_id)}if(window.mtr_site_ids)for(mtr_custom.async=1;mtr_site_ids.length;)mtr.init(mtr_site_ids.shift())}